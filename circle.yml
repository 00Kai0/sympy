machine:
  environment:
    PATH: "$HOME/miniconda/bin:${PATH}"

dependencies:
  pre:
    - curl -L --silent -o miniconda.sh https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
    - bash miniconda.sh -b -p $HOME/miniconda
    - conda config --add channels conda-forge
    - conda config --set always_yes yes
    - conda update --quiet --all
    - conda install --quiet fastcache mpmath pytest pytest-pep8 pytest-flakes pytest-cache numpy scipy
  cache_directories:
    - "~/miniconda"

test:
  override:
    - ./.ci/test_circle_ci.sh
